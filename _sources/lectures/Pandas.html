

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Handling Data &#8212; PHYS 503</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_sources/lectures/Pandas';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Homework 01: Numerical python and data handling" href="../homework/Homework_01.html" />
    <link rel="prev" title="Jupyter Notebooks and Numerical Python" href="JupyterNumpy.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="PHYS 503 - Home"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="PHYS 503 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    <span style="color:Blue">Instrumentation Physics: Applications of Machine Learning</span>
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction to Machine Learning and Data Science</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../Week_01.html"><span style="color: blue;"><b>Course Introduction</b></span></a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1vq4b3zxrhEMJbfeCH52hufBbXvTwhufEXdSs8mWY2ec/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="JupyterNumpy.html">Jupyter Notebooks and Numerical Python</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Handling Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_01.html">Homework 01: Numerical python and data handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_02.html"><span style="color: blue;"><b>Visualizing &amp; Finding Structure in Data</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1_LstEfghjdZUheyrqbjx4PK9y1J0cN-_hOdCInTldp8/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="Visualization.html">Visualizing Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Clustering.html">Finding Structure in Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_02.html">Homework 02: Visualization and Expectation-Maximization</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_03.html"><span style="color: blue;"><b>Dimensionality, Linearity and Kernel Functions</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1x4bWQr7kEAh6Z6L7iaLdaNiY6SDTHtvHxzvjFM1wYnE/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="Dimensionality.html">Measuring and Reducing Dimensionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="Nonlinear.html">Adapting Linear Methods to Non-Linear Data and Kernel Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_03.html">Homework 03: K-means and Principle Component Analysis</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Probability and Statistics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_04.html"><span style="color: blue;"><b>Probability Theory</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1qW-gCHY3bQMmB0-klM0crTD9020UG3DTlT_awlOhy2A/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="ProbabilityTheory.html">Probability Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="ProbabilityDistributions.html">Important Probability Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_04.html">Homework 04: Probability Theory and Common Distributions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_05.html"><span style="color: blue;"><b>Kernel Density Estimation and Statistics</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1XZoeBdXzhcfezIbUrH0a9-4-QmM-5iNksLCB7X4q1wI/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="Density.html">Estimating Probability Density from Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Statistics.html">Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_05.html">Homework 05: Kernel Density Estimation, Covariance and Correlation</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Bayesian Inference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_06.html"><span style="color: blue;"><b>Bayesian Statistics and Markov Chain Monte Carlo</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1L_lz0WbrrUu9qDPnKxYu5S_fCXKjl01Mrs2RnHN5_6E/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="Bayes.html">Bayesian Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="MCMC.html">Markov Chain Monte Carlo in Practice</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_06.html">Homework 06: Bayesian Statistics and MCMC</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Project_01.html"><span style="color: blue;"><b>Project 01</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_01_HiggsTauTau.html">Higgs Boson Decaying to Tau Leptons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_01_ExoticParticles.html">Searching for Exotic Particles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_01_GalaxyZoo.html">Galaxy Zoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_01_NuclearGeometryQGP.html">Nuclear Geometry and Characterization of the Quark Gluon Plasma</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_01_DarkEnergySurvey.html">Dark Energy Survey</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_07.html"><span style="color: blue;"><b>Stochastic Processes, Markov Chains &amp; Variational Inference</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/11Mzc9rBUcnEh_D3SKeDUoCW-iwIA9ilcxsx_4yuu32A/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="Markov.html">Stochastic Processes and Markov-Chain Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="Variational.html">Variational Inference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_07.html">Homework 07: Markov Chains</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_08.html"><span style="color: blue;"><b>Optimization and Model Selection</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1KshmOwKTWptL-3PASHrW6WT2PkH2ltU-XwoYOflhKQk/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="Optimization.html">Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="ModelSelection.html">Bayesian Model Selection</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Supervised Learning &amp; Cross Validation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_09.html"><span style="color: blue;"><b>Learning &amp; Cross Validation</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1a2cjkREM0LYxRjrLwrfHPTotM0n_CgVrZ_WQjEyc_Jc/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="Learning.html">Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="CrossValidation.html">Cross Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_08.html">Homework 08: Cross Validation</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Artificial Neural Networks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_10.html"><span style="color: blue;"><b>Supervised Learning &amp; Artificial Neural Networks</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1vyg7eSo5XaUAtYDwxmLY5qeUrwKxKqJcEEHPB40yVpE/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="Supervised.html">Supervised Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="NeuralNetworks.html">Artificial Neural Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_09.html">Homework 09: Artificial Neural Networks</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Deep Learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_11.html"><span style="color: blue;"><b>Deep Neural Networks</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1RnFI0k15C_m2j43QtFDGCFRBCcQ-Rx6EG-9U3EumOHc/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="DeepLearning.html">Deep Learning</a></li>



<li class="toctree-l2"><a class="reference internal" href="../homework/Homework_10.html">Homework 10: Forecasting Projectile Motion with Recurrent Neural Networks</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_12.html"><span style="color: blue;"><b>Graph Neural Networks</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1fxZdnCU_8pWocQbjMQ5HUOSUL3MgbCyg3xFWxfeNaeY/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="GraphNeuralNetworks.html">Graph Neural Networks</a></li>





</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Project_02.html"><span style="color: blue;"><b>Project 02</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_02_HiggsTauTau.html"><em><strong><span style="color:Yellow">Higgs Boson Decaying to Tau Leptons</span></strong></em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_02_ExoticParticles.html"><em><strong><span style="color:Yellow">Searching for Exotic Particles</span></strong></em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_02_GalaxyZoo.html"><em><strong><span style="color:Yellow">Galaxy Zoo</span></strong></em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/Project_02_NuclearGeometryQGP.html">Nuclear Geometry and Characterization of the Quark Gluon Plasma</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_13.html"><span style="color: blue;"><b>Unsupervised Learning, Uncertainties and Anomaly Detection</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1jGxr3j5t7Ahi3Ai6501dVJXOIzvlYMGhe9ZDqHlcfjo/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="UnsupervisedLearning.html">Unsupervised Learning</a></li>

</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Accelerated Machine Learning and Inference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week_14.html"><span style="color: blue;"><b>Accelerated Machine Learning and Inference</b></span></a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://docs.google.com/presentation/d/1-_9DcO71v6fQN1kNhKRH2d2iSjhs_Ddi2wLxiXy6RNg/edit?usp=sharing">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="AcceleratedML.html">Accelerated Machine Learning and Inference</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/illinois-ipaml/MachineLearningForPhysics/blob/main/_sources/lectures/Pandas.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>



<a href="https://github.com/illinois-ipaml/MachineLearningForPhysics" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/_sources/lectures/Pandas.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Handling Data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-load-course-data-files-span"><span style="color:Orange">Load Course Data Files</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-read-files-with-pandas-span"><span style="color:Orange">Read Files with Pandas</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-work-with-subsets-of-data-span"><span style="color:Orange">Work with Subsets of Data</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-extend-data-with-new-columns-span"><span style="color:Orange">Extend Data with New Columns</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-combine-data-from-different-sources-span"><span style="color:Orange">Combine Data from Different Sources</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-prepare-data-from-an-external-source-span"><span style="color:Orange">Prepare Data from an External Source</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-acknowledgments-span"><span style="color:Orange">Acknowledgments</span></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="handling-data">
<h1>Handling Data<a class="headerlink" href="#handling-data" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span><span class="p">;</span> <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
</pre></div>
</div>
</div>
</div>
<section id="span-style-color-orange-load-course-data-files-span">
<h2><span style="color:Orange">Load Course Data Files</span><a class="headerlink" href="#span-style-color-orange-load-course-data-files-span" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wget_data</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">local_path</span> <span class="o">=</span> <span class="s1">&#39;./tmp_data&#39;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;wget&quot;</span><span class="p">,</span> <span class="s2">&quot;-nc&quot;</span><span class="p">,</span> <span class="s2">&quot;-P&quot;</span><span class="p">,</span> <span class="n">local_path</span><span class="p">,</span> <span class="n">url</span><span class="p">],</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;UTF-8&#39;</span><span class="p">)</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">while</span> <span class="n">rc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">line</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
      <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
      <span class="n">rc</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wget_data</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/illinois-ipaml/MachineLearningForPhysics/main/data/pong_data.hf5&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>File ‘./tmp_data/pong_data.hf5’ already there; not retrieving.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">locate_data</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">check_exists</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">local_path</span><span class="o">=</span><span class="s1">&#39;./tmp_data&#39;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">check_exists</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">RuxntimeError</span><span class="p">(</span><span class="s1">&#39;No such data file: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">path</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;pong_data.hf5&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;./tmp_data/pong_data.hf5&#39;
</pre></div>
</div>
</div>
</div>
<p>Data files are stored in the industry standard <a class="reference external" href="https://en.wikipedia.org/wiki/Hierarchical_Data_Format">binary HDF5</a> and <a class="reference external" href="https://en.wikipedia.org/wiki/Comma-separated_values">text CSV</a> formats, with extensions <code class="docutils literal notranslate"><span class="pre">.hf5</span></code> and <code class="docutils literal notranslate"><span class="pre">.csv</span></code>, respectively. HDF5 is more efficient for larger files but requires specialized software to read.  CSV files are just plain text:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wget_data</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/illinois-ipaml/MachineLearningForPhysics/main/data/line_data.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>File ‘./tmp_data/line_data.csv’ already there; not retrieving.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;line_data.csv&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># Print the first 5 lines of the file.</span>
    <span class="k">for</span> <span class="n">lineno</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">(),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>x,y,dy
0.3929383711957233,0.08540861657452603,0.3831920560881885
-0.42772133009924107,-0.5198803411067978,0.38522044793317467
-0.5462970928715938,-0.8124804852644906,
0.10262953816578246,0.10527828529558633,0.38556680974439583
</pre></div>
</div>
</div>
</div>
<p>The first line specifies the names of each column (“feature”) in the data file. Subsequent lines are the rows (“samples”) of the data file, with values for each column separated by commas.  Note that values might be missing (for example, at the end of the third row).</p>
</section>
<section id="span-style-color-orange-read-files-with-pandas-span">
<h2><span style="color:Orange">Read Files with Pandas</span><a class="headerlink" href="#span-style-color-orange-read-files-with-pandas-span" title="Permalink to this heading">#</a></h2>
<p>We will use the <a class="reference external" href="https://pandas.pydata.org/">Pandas package</a> to read data files into DataFrame objects in memory.  This will only be a quick introduction. For a deeper dive, start with <a class="reference external" href="https://jakevdp.github.io/PythonDataScienceHandbook/03.00-introduction-to-pandas.html">Data Manipulation with Pandas</a> in the <a class="reference external" href="https://jakevdp.github.io/PythonDataScienceHandbook/index.html">Phython Data Science Handbook</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pong_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;pong_data.hf5&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;line_data.csv&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>You can think of a DataFrame as an enhanced 2D numpy array, with most of the same capabilities:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2000, 3)
</pre></div>
</div>
</div>
</div>
<p>Individual columns also behave like enhanced 1D numpy arrays:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2000,)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2000,)
</pre></div>
</div>
</div>
</div>
<p>For a first look at some unknown data, start with some basic <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.aggregate.html">summary statistics</a>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>dy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>2000.000000</td>
      <td>2000.000000</td>
      <td>1850.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>-0.000509</td>
      <td>-0.086233</td>
      <td>0.479347</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.585281</td>
      <td>0.782878</td>
      <td>0.228198</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-0.999836</td>
      <td>-2.390646</td>
      <td>0.151793</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>-0.513685</td>
      <td>-0.648045</td>
      <td>0.302540</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>-0.006021</td>
      <td>-0.068052</td>
      <td>0.431361</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.501449</td>
      <td>0.473741</td>
      <td>0.610809</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.999289</td>
      <td>2.365710</td>
      <td>1.506188</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Jot down a few things you notice about this data from this summary.</p>
<ul class="simple">
<li><p>The values of x and y are symmetric about zero.</p></li>
<li><p>The values of x look uniformly distributed on [-1, +1], judging by the percentiles.</p></li>
<li><p>The value of dy is always &gt; 0, as you might expect if it represents the “error on y”.</p></li>
<li><p>The dy column is missing 150 entries.</p></li>
</ul>
<p>Summarize <code class="docutils literal notranslate"><span class="pre">pong_data</span></code> the same way.  Does anything stick out?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pong_data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x0</th>
      <th>x1</th>
      <th>x2</th>
      <th>x3</th>
      <th>x4</th>
      <th>x5</th>
      <th>x6</th>
      <th>x7</th>
      <th>x8</th>
      <th>x9</th>
      <th>y0</th>
      <th>y1</th>
      <th>y2</th>
      <th>y3</th>
      <th>y4</th>
      <th>y5</th>
      <th>y6</th>
      <th>y7</th>
      <th>y8</th>
      <th>y9</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.0</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.049004</td>
      <td>0.132093</td>
      <td>0.212905</td>
      <td>0.291504</td>
      <td>0.367950</td>
      <td>0.442301</td>
      <td>0.514615</td>
      <td>0.584949</td>
      <td>0.653355</td>
      <td>0.719888</td>
      <td>0.0</td>
      <td>0.125206</td>
      <td>0.217122</td>
      <td>0.276658</td>
      <td>0.304702</td>
      <td>0.302116</td>
      <td>0.269740</td>
      <td>0.208390</td>
      <td>0.118860</td>
      <td>0.001921</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.062998</td>
      <td>0.067380</td>
      <td>0.075805</td>
      <td>0.086806</td>
      <td>0.099285</td>
      <td>0.112547</td>
      <td>0.126175</td>
      <td>0.139919</td>
      <td>0.153624</td>
      <td>0.167196</td>
      <td>0.0</td>
      <td>0.010876</td>
      <td>0.021454</td>
      <td>0.031742</td>
      <td>0.041748</td>
      <td>0.051481</td>
      <td>0.060946</td>
      <td>0.070153</td>
      <td>0.079107</td>
      <td>0.087815</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-0.161553</td>
      <td>-0.089041</td>
      <td>-0.018516</td>
      <td>0.050077</td>
      <td>0.116790</td>
      <td>0.181677</td>
      <td>0.244785</td>
      <td>0.306165</td>
      <td>0.365863</td>
      <td>0.415850</td>
      <td>0.0</td>
      <td>0.093722</td>
      <td>0.155016</td>
      <td>0.184769</td>
      <td>0.183846</td>
      <td>0.153088</td>
      <td>0.093310</td>
      <td>0.005310</td>
      <td>-0.110141</td>
      <td>-0.252291</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>-0.001755</td>
      <td>0.079435</td>
      <td>0.157023</td>
      <td>0.229517</td>
      <td>0.293469</td>
      <td>0.353604</td>
      <td>0.414068</td>
      <td>0.473338</td>
      <td>0.532280</td>
      <td>0.590583</td>
      <td>0.0</td>
      <td>0.115816</td>
      <td>0.198597</td>
      <td>0.249250</td>
      <td>0.268654</td>
      <td>0.257665</td>
      <td>0.217116</td>
      <td>0.147817</td>
      <td>0.050555</td>
      <td>-0.073903</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.076534</td>
      <td>0.148675</td>
      <td>0.205846</td>
      <td>0.270214</td>
      <td>0.338380</td>
      <td>0.406922</td>
      <td>0.476322</td>
      <td>0.542847</td>
      <td>0.608249</td>
      <td>0.673589</td>
      <td>0.0</td>
      <td>0.127098</td>
      <td>0.220852</td>
      <td>0.282177</td>
      <td>0.311961</td>
      <td>0.311068</td>
      <td>0.280338</td>
      <td>0.220589</td>
      <td>0.132616</td>
      <td>0.017191</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.100177</td>
      <td>0.187800</td>
      <td>0.286463</td>
      <td>0.383127</td>
      <td>0.475724</td>
      <td>0.565217</td>
      <td>0.651398</td>
      <td>0.734418</td>
      <td>0.816378</td>
      <td>0.896600</td>
      <td>0.0</td>
      <td>0.132847</td>
      <td>0.232193</td>
      <td>0.298956</td>
      <td>0.334029</td>
      <td>0.338281</td>
      <td>0.312554</td>
      <td>0.257672</td>
      <td>0.174431</td>
      <td>0.063610</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.151118</td>
      <td>0.261095</td>
      <td>0.370325</td>
      <td>0.476563</td>
      <td>0.579891</td>
      <td>0.684321</td>
      <td>0.787124</td>
      <td>0.887111</td>
      <td>0.984358</td>
      <td>1.078941</td>
      <td>0.0</td>
      <td>0.144799</td>
      <td>0.255769</td>
      <td>0.333838</td>
      <td>0.379908</td>
      <td>0.394854</td>
      <td>0.379530</td>
      <td>0.334764</td>
      <td>0.261364</td>
      <td>0.160113</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Some things that stick out from this summary are:</p>
<ul class="simple">
<li><p>Mean, median values in the xn columns are increasing left to right.</p></li>
<li><p>Column y0 is always zero, so not very informative.</p></li>
<li><p>Mean, median values in the yn columns increase from y0 to y4 then decrease through y9.</p></li>
</ul>
</section>
<section id="span-style-color-orange-work-with-subsets-of-data-span">
<h2><span style="color:Orange">Work with Subsets of Data</span><a class="headerlink" href="#span-style-color-orange-work-with-subsets-of-data-span" title="Permalink to this heading">#</a></h2>
<p>A subset is specified by limiting the rows and/or columns.  We have already seen how to pick out a single column, e.g. with <code class="docutils literal notranslate"><span class="pre">line_data['x']</span></code>.</p>
<p>We can also pick out specific rows (for details on why we use <code class="docutils literal notranslate"><span class="pre">iloc</span></code> see <a class="reference external" href="https://jakevdp.github.io/PythonDataScienceHandbook/03.02-data-indexing-and-selection.html#Indexers:-loc,-iloc,-and-ix">here</a>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>dy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.392938</td>
      <td>0.085409</td>
      <td>0.383192</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.427721</td>
      <td>-0.519880</td>
      <td>0.385220</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.546297</td>
      <td>-0.812480</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.102630</td>
      <td>0.105278</td>
      <td>0.385567</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Note how the missing value in the CSV file is represented as NaN = “not a number”.  This is generally how Pandas handles any <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/missing_data.html">data that is missing / invalid or otherwise not available (NA)</a>.</p>
<p>We may not want to use any rows with missing data. Select the subset of useful data with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data_valid</span> <span class="o">=</span> <span class="n">line_data</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data_valid</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>dy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.392938</td>
      <td>0.085409</td>
      <td>0.383192</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.427721</td>
      <td>-0.519880</td>
      <td>0.385220</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.102630</td>
      <td>0.105278</td>
      <td>0.385567</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.438938</td>
      <td>0.582137</td>
      <td>0.509960</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>You can also select rows using any logical test on its column values. For example, to select all rows with dy &gt; 0.5 and y &lt; 0:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xpos</span> <span class="o">=</span> <span class="n">line_data</span><span class="p">[(</span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;dy&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)]</span>
<span class="n">xpos</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>dy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>13</th>
      <td>-0.880644</td>
      <td>-1.482074</td>
      <td>0.698284</td>
    </tr>
    <tr>
      <th>16</th>
      <td>-0.635017</td>
      <td>-1.192232</td>
      <td>0.619905</td>
    </tr>
    <tr>
      <th>30</th>
      <td>-0.815790</td>
      <td>-0.172324</td>
      <td>0.643215</td>
    </tr>
    <tr>
      <th>35</th>
      <td>-0.375478</td>
      <td>-1.320013</td>
      <td>0.574198</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">describe</span></code> to compare the summary statistics for rows with x &lt; 0 and x &gt;= 0. Do they make sense?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="p">[</span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>dy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>1006.000000</td>
      <td>1006.000000</td>
      <td>938.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>-0.507065</td>
      <td>-0.689012</td>
      <td>0.472889</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.288074</td>
      <td>0.498581</td>
      <td>0.227474</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-0.999836</td>
      <td>-2.390646</td>
      <td>0.159862</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>-0.758180</td>
      <td>-1.005357</td>
      <td>0.294420</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>-0.511167</td>
      <td>-0.643512</td>
      <td>0.419482</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>-0.264287</td>
      <td>-0.338449</td>
      <td>0.611192</td>
    </tr>
    <tr>
      <th>max</th>
      <td>-0.000128</td>
      <td>0.757903</td>
      <td>1.506188</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="p">[</span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>dy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>994.000000</td>
      <td>994.000000</td>
      <td>912.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.512162</td>
      <td>0.523822</td>
      <td>0.485989</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.287312</td>
      <td>0.491520</td>
      <td>0.228875</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.001123</td>
      <td>-1.154558</td>
      <td>0.151793</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.266587</td>
      <td>0.163363</td>
      <td>0.312799</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.502736</td>
      <td>0.471419</td>
      <td>0.436676</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.761346</td>
      <td>0.821626</td>
      <td>0.607731</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.999289</td>
      <td>2.365710</td>
      <td>1.378183</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="span-style-color-orange-extend-data-with-new-columns-span">
<h2><span style="color:Orange">Extend Data with New Columns</span><a class="headerlink" href="#span-style-color-orange-extend-data-with-new-columns-span" title="Permalink to this heading">#</a></h2>
<p>You can easily add new columns derived from existing columns, for example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;yprediction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.2</span> <span class="o">*</span> <span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.1</span>
</pre></div>
</div>
</div>
</div>
<p>The new column is only in memory, and not automatically written back to the original file.</p>
<p><em><strong><span style="color:violet">EXERCISE</span></strong></em>: Add a new column for the “pull”, defined as:
$<span class="math notranslate nohighlight">\(
y_{pull} \equiv \frac{y - y_{prediction}}{\delta y} \; .
\)</span>$
What would you expect the mean and standard deviation (std) of this new column to be if the prediction is accuracte? What do the actual mean, std values indicate?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;ypull&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;yprediction&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="n">line_data</span><span class="p">[</span><span class="s1">&#39;dy&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>The mean should be close to zero if the prediction is unbiased.  The RMS should be close to one if the prediction is unbiased and the errors are accurate.  The actual values indicate that the prediction is unbiased, but the errors are overerestimated.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">line_data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>dy</th>
      <th>yprediction</th>
      <th>ypull</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>2000.000000</td>
      <td>2000.000000</td>
      <td>1850.000000</td>
      <td>2000.000000</td>
      <td>1850.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>-0.000509</td>
      <td>-0.086233</td>
      <td>0.479347</td>
      <td>-0.100611</td>
      <td>0.036367</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.585281</td>
      <td>0.782878</td>
      <td>0.228198</td>
      <td>0.702338</td>
      <td>0.661659</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-0.999836</td>
      <td>-2.390646</td>
      <td>0.151793</td>
      <td>-1.299803</td>
      <td>-2.162585</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>-0.513685</td>
      <td>-0.648045</td>
      <td>0.302540</td>
      <td>-0.716422</td>
      <td>-0.429185</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>-0.006021</td>
      <td>-0.068052</td>
      <td>0.431361</td>
      <td>-0.107225</td>
      <td>0.033875</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.501449</td>
      <td>0.473741</td>
      <td>0.610809</td>
      <td>0.501739</td>
      <td>0.484257</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.999289</td>
      <td>2.365710</td>
      <td>1.506188</td>
      <td>1.099146</td>
      <td>2.033837</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="span-style-color-orange-combine-data-from-different-sources-span">
<h2><span style="color:Orange">Combine Data from Different Sources</span><a class="headerlink" href="#span-style-color-orange-combine-data-from-different-sources-span" title="Permalink to this heading">#</a></h2>
<p>Most of the data files for this course are in data/targets pairs (for reasons that will be clear soon).</p>
<p>Verify that the files <code class="docutils literal notranslate"><span class="pre">pong_data.hf5</span></code> and <code class="docutils literal notranslate"><span class="pre">pong_targets.hf5</span></code> have the same number of rows but different column names.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wget_data</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/illinois-ipaml/MachineLearningForPhysics/main/data/pong_targets.hf5&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>File ‘./tmp_data/pong_targets.hf5’ already there; not retrieving.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pong_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;pong_data.hf5&#39;</span><span class="p">))</span>
<span class="n">pong_targets</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;pong_targets.hf5&#39;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#rows: </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pong_data</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">pong_targets</span><span class="p">)))</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">pong_data</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">pong_targets</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;data columns: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pong_data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;targets columns: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pong_targets</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>#rows: 1000, 1000.
data columns: [&#39;x0&#39; &#39;x1&#39; &#39;x2&#39; &#39;x3&#39; &#39;x4&#39; &#39;x5&#39; &#39;x6&#39; &#39;x7&#39; &#39;x8&#39; &#39;x9&#39; &#39;y0&#39; &#39;y1&#39; &#39;y2&#39; &#39;y3&#39;
 &#39;y4&#39; &#39;y5&#39; &#39;y6&#39; &#39;y7&#39; &#39;y8&#39; &#39;y9&#39;].
targets columns: [&#39;th0&#39; &#39;hit&#39; &#39;grp&#39;].
</pre></div>
</div>
</div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">pd.concat</span></code> to combine the (different) columns, matching row by row. Verify that your combined data has the expected number of rows and column names.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pong_both</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">pong_data</span><span class="p">,</span> <span class="n">pong_targets</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#rows: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pong_both</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;columns: </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pong_both</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>#rows: 1000
columns: [&#39;x0&#39; &#39;x1&#39; &#39;x2&#39; &#39;x3&#39; &#39;x4&#39; &#39;x5&#39; &#39;x6&#39; &#39;x7&#39; &#39;x8&#39; &#39;x9&#39; &#39;y0&#39; &#39;y1&#39; &#39;y2&#39; &#39;y3&#39;
 &#39;y4&#39; &#39;y5&#39; &#39;y6&#39; &#39;y7&#39; &#39;y8&#39; &#39;y9&#39; &#39;th0&#39; &#39;hit&#39; &#39;grp&#39;].
</pre></div>
</div>
</div>
</div>
</section>
<section id="span-style-color-orange-prepare-data-from-an-external-source-span">
<h2><span style="color:Orange">Prepare Data from an External Source</span><a class="headerlink" href="#span-style-color-orange-prepare-data-from-an-external-source-span" title="Permalink to this heading">#</a></h2>
<p>Finally, here is an example of taking data from an external source and adapting it to the standard format we are using.  The data is from the <a class="reference external" href="https://www.kaggle.com/c/higgs-boson">2014 ATLAS Higgs Challenge</a> which is now documented and archived <a class="reference external" href="http://opendata.cern.ch/record/328">here</a>.  More details about the challenge are in <a class="reference external" href="http://opendata.cern.ch/record/329/files/atlas-higgs-challenge-2014.pdf">this writeup</a>.</p>
<p><em><strong><span style="color:violet">EXERCISE</span></strong></em>:</p>
<ol class="arabic simple">
<li><p>Download the compressed CSV file (~62Mb) <code class="docutils literal notranslate"><span class="pre">atlas-higgs-challenge-2014-v2.csv.gz</span></code> using the link at the bottom of <a class="reference external" href="http://opendata.cern.ch/record/328">this page</a>.</p></li>
<li><p>You can uncompress (gunzip) the file on-the-fly.</p></li>
<li><p>Skim the description of the columns <a class="reference external" href="http://opendata.cern.ch/record/328">here</a>. The details are not important, but the main points are that:</p></li>
</ol>
<ul class="simple">
<li><p>There are two types of input “features”: 17 primary + 13 derived.</p></li>
<li><p>The goal is to predict the “Label” from the input features.</p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p>Examine the function defined below and determine what it does. Lookup the documentation of any functions you are unfamiliar with.</p></li>
<li><p>Run the function below, which should create two new files in your coursse data directory:</p></li>
</ol>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">higgs_data.hf5</span></code>: Input data with 30 columns, ~100Mb size.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">higgs_targets.hf5</span></code>: Ouput targets with 1 column, ~8.8Mb size.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wget_data</span><span class="p">(</span><span class="s1">&#39;http://opendata.cern.ch/record/328/files/atlas-higgs-challenge-2014-v2.csv.gz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>File ‘./tmp_data/atlas-higgs-challenge-2014-v2.csv.gz’ already there; not retrieving.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">prepare_higgs</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;atlas-higgs-challenge-2014-v2.csv.gz&#39;</span><span class="p">):</span>
    <span class="c1"># Read the input file, uncompressing on the fly.</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;EventId&#39;</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="s1">&#39;-999.0&#39;</span><span class="p">)</span>
    <span class="c1"># Prepare and save the data output file.</span>
    <span class="n">higgs_data</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;KaggleSet&#39;</span><span class="p">,</span> <span class="s1">&#39;KaggleWeight&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
    <span class="n">higgs_data</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;higgs_data.hf5&#39;</span><span class="p">,</span> <span class="n">check_exists</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="c1"># Prepare and save the targets output file.</span>
    <span class="n">higgs_targets</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Label&#39;</span><span class="p">]]</span>
    <span class="n">higgs_targets</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;higgs_targets.hf5&#39;</span><span class="p">,</span> <span class="n">check_exists</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="s1">&#39;targets&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prepare_higgs</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Check that <code class="docutils literal notranslate"><span class="pre">locate_data</span></code> can find the new files:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;higgs_data.hf5&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;./tmp_data/higgs_data.hf5&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;higgs_targets.hf5&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;./tmp_data/higgs_targets.hf5&#39;
</pre></div>
</div>
</div>
</div>
<p>Now you can load these data files and explore the data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">higgs_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;higgs_data.hf5&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">higgs_data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DER_mass_MMC</th>
      <th>DER_mass_transverse_met_lep</th>
      <th>DER_mass_vis</th>
      <th>DER_pt_h</th>
      <th>DER_deltaeta_jet_jet</th>
      <th>DER_mass_jet_jet</th>
      <th>DER_prodeta_jet_jet</th>
      <th>DER_deltar_tau_lep</th>
      <th>DER_pt_tot</th>
      <th>DER_sum_pt</th>
      <th>...</th>
      <th>PRI_met_sumet</th>
      <th>PRI_jet_num</th>
      <th>PRI_jet_leading_pt</th>
      <th>PRI_jet_leading_eta</th>
      <th>PRI_jet_leading_phi</th>
      <th>PRI_jet_subleading_pt</th>
      <th>PRI_jet_subleading_eta</th>
      <th>PRI_jet_subleading_phi</th>
      <th>PRI_jet_all_pt</th>
      <th>Weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>693636.000000</td>
      <td>818238.000000</td>
      <td>818238.000000</td>
      <td>818238.000000</td>
      <td>237985.000000</td>
      <td>237985.000000</td>
      <td>237985.000000</td>
      <td>818238.000000</td>
      <td>818238.000000</td>
      <td>818238.000000</td>
      <td>...</td>
      <td>818238.000000</td>
      <td>818238.000000</td>
      <td>490867.000000</td>
      <td>490867.000000</td>
      <td>490867.000000</td>
      <td>237985.000000</td>
      <td>237985.000000</td>
      <td>237985.000000</td>
      <td>818238.000000</td>
      <td>818238.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>121.867699</td>
      <td>49.252712</td>
      <td>81.140556</td>
      <td>57.849522</td>
      <td>2.404626</td>
      <td>372.181000</td>
      <td>-0.828740</td>
      <td>2.373871</td>
      <td>18.969620</td>
      <td>158.596161</td>
      <td>...</td>
      <td>209.908752</td>
      <td>0.979923</td>
      <td>84.904297</td>
      <td>-0.001248</td>
      <td>-0.018856</td>
      <td>57.810280</td>
      <td>-0.006669</td>
      <td>-0.010470</td>
      <td>73.205574</td>
      <td>0.503144</td>
    </tr>
    <tr>
      <th>std</th>
      <td>56.942486</td>
      <td>35.378609</td>
      <td>40.582706</td>
      <td>63.411938</td>
      <td>1.742546</td>
      <td>398.235413</td>
      <td>3.583769</td>
      <td>0.780875</td>
      <td>21.918491</td>
      <td>116.089806</td>
      <td>...</td>
      <td>126.816689</td>
      <td>0.978793</td>
      <td>60.649529</td>
      <td>1.779419</td>
      <td>1.815363</td>
      <td>32.455467</td>
      <td>2.031695</td>
      <td>1.816033</td>
      <td>98.331757</td>
      <td>0.572200</td>
    </tr>
    <tr>
      <th>min</th>
      <td>9.044000</td>
      <td>0.000000</td>
      <td>6.329000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>13.602000</td>
      <td>-19.011999</td>
      <td>0.208000</td>
      <td>0.000000</td>
      <td>46.103001</td>
      <td>...</td>
      <td>13.678000</td>
      <td>0.000000</td>
      <td>30.000000</td>
      <td>-4.500000</td>
      <td>-3.142000</td>
      <td>30.000000</td>
      <td>-4.500000</td>
      <td>-3.142000</td>
      <td>-0.000000</td>
      <td>0.000461</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>91.862000</td>
      <td>19.304001</td>
      <td>59.414001</td>
      <td>14.164250</td>
      <td>0.886000</td>
      <td>112.627998</td>
      <td>-2.626000</td>
      <td>1.814000</td>
      <td>2.839000</td>
      <td>77.491997</td>
      <td>...</td>
      <td>122.985001</td>
      <td>0.000000</td>
      <td>44.487999</td>
      <td>-1.337000</td>
      <td>-1.591000</td>
      <td>37.325001</td>
      <td>-1.604000</td>
      <td>-1.589000</td>
      <td>0.000000</td>
      <td>0.005721</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>112.500999</td>
      <td>46.484001</td>
      <td>73.744003</td>
      <td>38.470001</td>
      <td>2.101000</td>
      <td>226.192993</td>
      <td>-0.244000</td>
      <td>2.492000</td>
      <td>12.383000</td>
      <td>120.665001</td>
      <td>...</td>
      <td>179.882996</td>
      <td>1.000000</td>
      <td>65.760002</td>
      <td>0.000000</td>
      <td>-0.044000</td>
      <td>47.993000</td>
      <td>-0.011000</td>
      <td>-0.020000</td>
      <td>40.506001</td>
      <td>0.357223</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>135.576004</td>
      <td>73.620003</td>
      <td>92.188004</td>
      <td>79.226748</td>
      <td>3.691000</td>
      <td>478.782013</td>
      <td>0.945000</td>
      <td>2.962000</td>
      <td>27.634001</td>
      <td>200.884495</td>
      <td>...</td>
      <td>263.828003</td>
      <td>2.000000</td>
      <td>103.569504</td>
      <td>1.336000</td>
      <td>1.557000</td>
      <td>66.695000</td>
      <td>1.593000</td>
      <td>1.568000</td>
      <td>110.387001</td>
      <td>0.733462</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1949.260986</td>
      <td>968.669006</td>
      <td>1349.350952</td>
      <td>2834.999023</td>
      <td>8.724000</td>
      <td>4974.979004</td>
      <td>17.650000</td>
      <td>5.751000</td>
      <td>2834.999023</td>
      <td>2079.162109</td>
      <td>...</td>
      <td>2190.274902</td>
      <td>3.000000</td>
      <td>1163.438965</td>
      <td>4.500000</td>
      <td>3.142000</td>
      <td>817.801025</td>
      <td>4.500000</td>
      <td>3.142000</td>
      <td>1860.175049</td>
      <td>2.386316</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 31 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">higgs_targets</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">locate_data</span><span class="p">(</span><span class="s1">&#39;higgs_targets.hf5&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">higgs_targets</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>818238</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>2</td>
    </tr>
    <tr>
      <th>top</th>
      <td>b</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>538678</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>You can now safely remove the <code class="docutils literal notranslate"><span class="pre">tmp_data</span></code> directory if you like. This is an example of a <a class="reference external" href="https://jakevdp.github.io/PythonDataScienceHandbook/01.05-ipython-and-shell-commands.html">shell command</a>. Uncomment this line if you want to do this. Colab will clean this up after you end the session.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!rm -rf ./tmp_data</span>
</pre></div>
</div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="span-style-color-orange-acknowledgments-span">
<h2><span style="color:Orange">Acknowledgments</span><a class="headerlink" href="#span-style-color-orange-acknowledgments-span" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Initial version: Mark Neubauer</p></li>
</ul>
<p>© Copyright 2023</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./_sources/lectures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="JupyterNumpy.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Jupyter Notebooks and Numerical Python</p>
      </div>
    </a>
    <a class="right-next"
       href="../homework/Homework_01.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Homework 01: Numerical python and data handling</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-load-course-data-files-span"><span style="color:Orange">Load Course Data Files</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-read-files-with-pandas-span"><span style="color:Orange">Read Files with Pandas</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-work-with-subsets-of-data-span"><span style="color:Orange">Work with Subsets of Data</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-extend-data-with-new-columns-span"><span style="color:Orange">Extend Data with New Columns</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-combine-data-from-different-sources-span"><span style="color:Orange">Combine Data from Different Sources</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-prepare-data-from-an-external-source-span"><span style="color:Orange">Prepare Data from an External Source</span></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#span-style-color-orange-acknowledgments-span"><span style="color:Orange">Acknowledgments</span></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Mark Neubauer
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>